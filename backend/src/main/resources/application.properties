# Server Configuration
# Render provides PORT env var; fall back to 8080 locally
server.port=${PORT:8080}
server.servlet.context-path=/api

# Database Configuration
# For local development (MySQL)
spring.datasource.url=jdbc:mysql://localhost:3306/vit_billing?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
spring.datasource.username=root
spring.datasource.password=mysqlpassword
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver


spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true

# For production PostgreSQL, use:
# spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Flyway Configuration
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/schema
spring.flyway.sql-migration-prefix=V
spring.flyway.sql-migration-separator=__
spring.flyway.sql-migration-suffixes=.sql

# JWT Configuration
# IMPORTANT: Set JWT_SECRET on Render; keep default only for local dev
jwt.secret=${JWT_SECRET:vit-billing-secret-key-change-this-in-production-minimum-256-bits-for-hs256}
jwt.expiration=${JWT_EXPIRATION:86400000}

# File Upload Configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# PDF Storage Path
pdf.storage.path=D:/Vit Oops cp/billing with react/backend/bills/invoices/

# Branding Assets
branding.logo.path=${BRANDING_LOGO_PATH:}

# Logging Configuration
logging.level.root=INFO
logging.level.com.msedcl.billing=DEBUG
logging.level.org.springframework.security=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# CORS Configuration
# Exact allowed origins (comma-separated). Keep localhost for dev and add your production frontend origin after deploy.
cors.allowed.origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}
# Wildcard patterns for dynamic preview URLs (e.g., Vercel previews like https://your-app-git-branch-user.vercel.app)
# Note: Spring supports allowedOriginPatterns since 5.3+. Be cautious with wide patterns.
cors.allowed.origin-patterns=${CORS_ALLOWED_ORIGIN_PATTERNS:https://*.vercel.app}

# Notification Configuration
spring.mail.host=localhost
spring.mail.port=1025
spring.mail.username=
spring.mail.password=
spring.mail.properties.mail.smtp.auth=false
spring.mail.properties.mail.smtp.starttls.enable=false
notifications.email.from=VIT-billing@example.com

# SMS Notification Configuration
notifications.sms.enabled=${SMS_ENABLED:false}
notifications.sms.gateway-url=${SMS_GATEWAY_URL:}
notifications.sms.api-key=${SMS_API_KEY:}
notifications.sms.sender=${SMS_SENDER_ID:VIT-BILLING}
